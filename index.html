<script>
  const db = [
    // iPhone detection
    { regex: /iPhone/i, brand: "Apple", model: "iPhone (כל הדגמים)", os: "iOS", esim: "yes", fiveg: "yes" },

    // Samsung Galaxy S series
    { regex: /SM-S90|SM-S91|SM-S92/i, brand: "Samsung", model: "Galaxy S22/S23/S24", os: "Android", esim: "yes", fiveg: "yes" },

    // Xiaomi
    { regex: /Xiaomi 1[34]/i, brand: "Xiaomi", model: "Xiaomi 13/14", os: "Android", esim: "yes", fiveg: "yes" },

    // POCO
    { regex: /POCO/i, brand: "POCO", model: "POCO", os: "Android", esim: "maybe", fiveg: "yes" },
  ];

  function updateChip(element, status) {
    element.classList.remove("yes", "no", "maybe");
    element.classList.add(status);
    element.textContent =
      status === "yes" ? "תומך" :
      status === "no" ? "לא תומך" :
      "דורש בדיקה";
  }

  function detect() {
    const ua = navigator.userAgent || "לא זמין";
    document.getElementById("ua").textContent = ua;

    let brand = "לא זוהה";
    let model = "לא זוהה";
    let os = /iPhone|iPad|iPod/i.test(ua) ? "iOS" : /Android/i.test(ua) ? "Android" : "לא זוהה";
    let esim = "maybe";
    let fiveg = "maybe";

    for (const d of db) {
      if (d.regex.test(ua)) {
        brand = d.brand;
        model = d.model;
        os = d.os;
        esim = d.esim;
        fiveg = d.fiveg;
        break;
      }
    }

    document.getElementById("brand").textContent = brand;
    document.getElementById("model").textContent = model;
    document.getElementById("os").textContent = os;

    updateChip(document.getElementById("esim"), esim);
    updateChip(document.getElementById("fiveg"), fiveg);
  }

  detect();
</script>
