<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <title>בדיקת תאימות eSIM</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background: #f3f4f6;
      margin: 0;
      padding: 0;
    }
    .container {
      max-width: 480px;
      margin: 40px auto;
      background: #ffffff;
      padding: 24px 20px;
      border-radius: 16px;
      box-shadow: 0 8px 24px rgba(15, 23, 42, 0.12);
    }
    h1 {
      font-size: 22px;
      margin-top: 0;
      margin-bottom: 8px;
      text-align: center;
    }
    p.subtitle {
      margin-top: 0;
      margin-bottom: 20px;
      font-size: 13px;
      color: #6b7280;
      text-align: center;
    }
    label {
      display: block;
      margin-bottom: 4px;
      font-size: 14px;
      font-weight: 600;
      color: #374151;
    }
    select, input {
      width: 100%;
      padding: 10px 12px;
      margin-bottom: 14px;
      border-radius: 10px;
      border: 1px solid #d1d5db;
      font-size: 14px;
      box-sizing: border-box;
    }
    select:focus, input:focus {
      outline: none;
      border-color: #2563eb;
      box-shadow: 0 0 0 1px #2563eb33;
    }
    .hint {
      font-size: 11px;
      color: #6b7280;
      margin-top: -8px;
      margin-bottom: 10px;
    }
    button {
      width: 100%;
      padding: 12px;
      border-radius: 999px;
      border: none;
      background: #2563eb;
      color: #ffffff;
      font-size: 15px;
      font-weight: 700;
      cursor: pointer;
      margin-top: 6px;
    }
    button:hover {
      background: #1d4ed8;
    }
    button:active {
      transform: scale(0.99);
    }
    .result {
      margin-top: 18px;
      padding: 14px 12px;
      border-radius: 12px;
      font-size: 14px;
      line-height: 1.5;
    }
    .result.ok {
      background: #ecfdf5;
      color: #065f46;
      border: 1px solid #6ee7b7;
    }
    .result.bad {
      background: #fef2f2;
      color: #991b1b;
      border: 1px solid #fecaca;
    }
    .result.unknown {
      background: #eff6ff;
      color: #1e40af;
      border: 1px solid #bfdbfe;
    }
    .result-title {
      font-weight: 700;
      margin-bottom: 4px;
    }
    .notes {
      font-size: 12px;
      color: #4b5563;
      margin-top: 4px;
    }
    .footer {
      text-align: center;
      margin-top: 16px;
      font-size: 11px;
      color: #9ca3af;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>בדיקת תאימות eSIM</h1>
    <p class="subtitle">מלא את פרטי המכשיר ונבדוק מול בנק הטלפונים אם הוא תומך eSIM.</p>

    <!-- שורה 1: יצרן -->
    <label for="brand">יצרן הטלפון</label>
    <select id="brand">
      <option value="">בחר יצרן...</option>
      <option value="apple">Apple (iPhone)</option>
      <option value="samsung">Samsung</option>
      <option value="xiaomi">Xiaomi / Redmi / Poco</option>
      <option value="pixel">Google Pixel</option>
      <option value="oneplus">OnePlus</option>
      <option value="oppo">OPPO / Realme</option>
      <option value="motorola">Motorola</option>
      <option value="nothing">Nothing</option>
      <option value="other">אחר / לא בטוח</option>
    </select>

    <!-- שורה 2: דגם ספציפי -->
    <label for="model">דגם ספציפי</label>
    <input id="model" type="text" placeholder="לדוגמה: iPhone 13 / SM-S911B / A2896" />

    <!-- שורה 3: הערות (מדינה / אזור / גרסה) -->
    <label for="region">הערות (לא חובה)</label>
    <input id="region" type="text" placeholder="לדוגמה: סין / הונג קונג / USA / Global" />
    <div class="hint">
      טיפ: באייפון אפשר לרשום את מספר הדגם מההגדרות (לדוגמה A2896).  
      בסמסונג אפשר לרשום את קוד הדגם (לדוגמה SM-S911B).
    </div>

    <button id="checkBtn">בדיקת תאימות</button>

    <div id="result" class="result" style="display:none;"></div>

    <div class="footer">
      כלי הדגמה – התוצאה היא בגדר עזר בלבד, יש לוודא מול הגדרות המכשיר בפועל.
    </div>
  </div>

  <script>
    // ----- "בנק הטלפונים" – כאן מגדירים את כל הדגמים -----
    // מבנה כל אובייקט:
    // brand: יצרן (apple/samsung/...)
    // model: שם דגם / קוד דגם / מספר דגם (normalize לאותיות גדולות בלי רווחים)
    // region: 'GLOBAL' / 'CN' / 'HK' / 'US' / 'OTHER' ...
    // esim: true/false
    // note: טקסט הסבר ללקוח (יופיע בתוצאה)

    const deviceDb = [
      // ===== APPLE =====
      { brand: 'apple', model: 'IPHONEXR', region: 'GLOBAL', esim: true,  note: 'iPhone XR תומך eSIM בכל הדגמים, למעט דגמי סין/הונג קונג.' },
      { brand: 'apple', model: 'IPHONEXR', region: 'CN',     esim: false, note: 'דגם סין/הונג קונג של iPhone XR ללא eSIM.' },

      { brand: 'apple', model: 'IPHONE11', region: 'GLOBAL', esim: true,  note: 'כל דגמי iPhone 11 תומכים eSIM למעט גרסאות סין/הונג קונג.' },
      { brand: 'apple', model: 'IPHONE11', region: 'CN',     esim: false, note: 'דגם סין/הונג קונג של iPhone 11 ללא eSIM.' },

      { brand: 'apple', model: 'IPHONE13', region: 'GLOBAL', esim: true,  note: 'כל דגמי iPhone 13 (כולל Mini/Pro/Max) תומכים eSIM, למעט דגמי סין/הונג קונג.' },
      { brand: 'apple', model: 'IPHONE13', region: 'CN',     esim: false, note: 'דגם סין/הונג קונג של iPhone 13 ללא eSIM (2x SIM פיזי).' },

      { brand: 'apple', model: 'A2896',    region: 'GLOBAL', esim: true,  note: 'iPhone 15 (מספר דגם A2896) – תומך eSIM.' },

      // SE לדוגמה
      { brand: 'apple', model: 'IPHONESE2', region: 'GLOBAL', esim: true, note: 'iPhone SE 2020 תומך eSIM בכל הדגמים.' },

      // ===== SAMSUNG =====
      // Galaxy S20
      { brand: 'samsung', model: 'SMG980F', region: 'GLOBAL', esim: true,  note: 'Galaxy S20 (SM-G980F) תומך eSIM.' },
      { brand: 'samsung', model: 'SMG9810', region: 'CN',     esim: false, note: 'Galaxy S20 דגם סין (SM-G9810) ללא eSIM.' },

      // Galaxy S23 – דוגמה
      { brand: 'samsung', model: 'SMS911B', region: 'GLOBAL', esim: true,  note: 'Galaxy S23 (SM-S911B) תומך eSIM.' },
      { brand: 'samsung', model: 'SMS9110', region: 'CN',     esim: false, note: 'Galaxy S23 (SM-S9110) דגם סין – ללא eSIM.' },

      // Galaxy S10 – לא תומך
      { brand: 'samsung', model: 'SMS10', region: 'GLOBAL', esim: false, note: 'סדרת Galaxy S10 אינה תומכת eSIM (למעט גרסאות מיוחדות בודדות).' },

      // ===== XIAOMI / REDMI / POCO =====
      { brand: 'xiaomi', model: 'XIAOMI13',  region: 'GLOBAL', esim: true,  note: 'Xiaomi 13 תומך eSIM בחלק גדול מהשווקים הגלובליים.' },
      { brand: 'xiaomi', model: 'REDMINOTE11', region: 'GLOBAL', esim: false, note: 'רוב סדרות Redmi Note אינן תומכות eSIM.' },
      { brand: 'xiaomi', model: 'POCOF3',    region: 'GLOBAL', esim: false, note: 'POCO F3 ללא תמיכת eSIM.' },

      // ===== GOOGLE PIXEL =====
      { brand: 'pixel', model: 'PIXEL4',   region: 'GLOBAL', esim: true, note: 'כל דגמי Google Pixel 2 ומעלה תומכים eSIM.' },
      { brand: 'pixel', model: 'PIXEL7PRO',region: 'GLOBAL', esim: true, note: 'Google Pixel 7 Pro – תומך eSIM.' },

      // ===== ONEPLUS =====
      { brand: 'oneplus', model: 'ONEPLUS8',  region: 'GLOBAL', esim: true,  note: 'OnePlus 8 תומך eSIM בחלק מהשווקים.' },
      { brand: 'oneplus', model: 'ONEPLUS7T', region: 'GLOBAL', esim: false, note: 'OnePlus 7T ללא eSIM.' },

      // ===== OPPO / REALME (דוגמה) =====
      { brand: 'oppo', model: 'FINDX5', region: 'GLOBAL', esim: true,  note: 'OPPO Find X5 – תומך eSIM בחלק מהגרסאות הגלובליות.' },
      { brand: 'oppo', model: 'REX5',   region: 'GLOBAL', esim: false, note: 'רוב דגמי Realme ללא eSIM.' },

      // ===== MOTOROLA =====
      { brand: 'motorola', model: 'EDGE30PRO', region: 'GLOBAL', esim: true, note: 'Motorola Edge 30 Pro – תומך eSIM.' },
      { brand: 'motorola', model: 'MOTOG52',   region: 'GLOBAL', esim: false, note: 'רוב דגמי Moto G ללא eSIM.' },

      // ===== NOTHING =====
      { brand: 'nothing', model: 'NOTHINGPHONE1', region: 'GLOBAL', esim: false, note: 'Nothing Phone (1) – ללא eSIM.' },
      { brand: 'nothing', model: 'NOTHINGPHONE2', region: 'GLOBAL', esim: true,  note: 'Nothing Phone (2) – תומך eSIM.' }
    ];

    // פונקציה לנרמול מחרוזת: אותיות גדולות, בלי רווחים וסימני מפריד בסיסיים
    function normalize(str) {
      return (str || "")
        .toString()
        .toUpperCase()
        .replace(/[\s\-_.]/g, '');
    }

    // פונקציה לפענוח האיזור שהלקוח כתב (טקסט חופשי) לאחד הערכים שלנו
    function detectRegion(rawRegion) {
      const r = (rawRegion || '').toLowerCase();

      if (!r) return 'ANY';

      if (r.includes('china') || r.includes('סין') || r.includes('cn')) {
        return 'CN';
      }
      if (r.includes('hong') || r.includes('hk') || r.includes('הונג')) {
        return 'HK';
      }
      if (r.includes('usa') || r.includes('us') || r.includes('ארה')) {
        return 'US';
      }
      if (r.includes('global') || r.includes('גלובל') || r.includes('world')) {
        return 'GLOBAL';
      }

      return 'OTHER';
    }

    function checkDevice() {
      const brand = document.getElementById('brand').value;
      const modelInput = document.getElementById('model').value;
      const regionInput = document.getElementById('region').value;

      const resultBox = document.getElementById('result');
      resultBox.style.display = 'none';
      resultBox.className = 'result';

      if (!brand || !modelInput.trim()) {
        resultBox.style.display = 'block';
        resultBox.classList.add('bad');
        resultBox.innerHTML = '<div class="result-title">חסר מידע</div>יש לבחור יצרן ולהקליד דגם ספציפי לפני הבדיקה.';
        return;
      }

      const normalizedModel = normalize(modelInput);
      const region = detectRegion(regionInput);

      // חיפוש בבנק
      let candidates = deviceDb.filter(d => d.brand === brand && normalize(d.model) === normalizedModel);

      if (candidates.length === 0) {
        // אם לא מצאנו לפי הדגם המדויק – ננסה חיפוש "גמיש" קטן (למשל IPHONE 13 PRO → IPHONE13)
        const modelShort = normalizedModel.replace(/PRO(MAX)?|PLUS|ULTRA|MINI/g, '');
        candidates = deviceDb.filter(d => d.brand === brand && normalize(d.model).includes(modelShort));
      }

      if (candidates.length === 0) {
        resultBox.style.display = 'block';
        resultBox.classList.add('unknown');
        resultBox.innerHTML =
          '<div class="result-title">לא מצאנו את הדגם במאגר</div>' +
          '<div>ייתכן שהדגם חדש, נדיר, או שאיות הדגם שונה. מומלץ לבדוק ידנית בהגדרות המכשיר אם קיימת אפשרות להוספת eSIM או שורת EID.</div>';
        return;
      }

      // אם המשתמש נתן איזור (CN/HK/US/...), נעדיף התאמה אליו
      let match = null;
      if (region !== 'ANY') {
        match = candidates.find(c => c.region === region) || candidates.find(c => c.region === 'GLOBAL') || candidates[0];
      } else {
        match = candidates.find(c => c.region === 'GLOBAL') || candidates[0];
      }

      resultBox.style.display = 'block';

      if (match.esim) {
        resultBox.classList.add('ok');
        resultBox.innerHTML =
          '<div class="result-title">כנראה שהמכשיר תומך eSIM ✅</div>' +
          '<div>זיהינו: ' + brand.toUpperCase() + ' – דגם: ' + modelInput + '</div>' +
          (match.note ? '<div class="notes">' + match.note + '</div>' : '') +
          '<div class="notes">מומלץ עדיין לוודא בהגדרות המכשיר בפועל (חיפוש EID / הוספת eSIM).</div>';
      } else {
        resultBox.classList.add('bad');
        resultBox.innerHTML =
          '<div class="result-title">כנראה שהמכשיר לא תומך eSIM ❌</div>' +
          '<div>זיהינו: ' + brand.toUpperCase() + ' – דגם: ' + modelInput + '</div>' +
          (match.note ? '<div class="notes">' + match.note + '</div>' : '') +
          '<div class="notes">אם אתה בטוח שהמכשיר כן תומך, ייתכן שמדובר בגרסה אחרת (אזור/מדינה). בדוק שוב את הדגם/הגרסה.</div>';
      }
    }

    document.getElementById('checkBtn').addEventListener('click', checkDevice);
  </script>
</body>
</html>
